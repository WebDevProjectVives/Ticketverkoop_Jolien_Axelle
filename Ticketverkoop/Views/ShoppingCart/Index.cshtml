@model Ticketverkoop.ViewModel.ShoppingCartVM


@{
    ViewData["Title"] = "Index";
}


<h3>
    <em>Bekijk</em> uw winkelwagentje:
</h3>



@if (Model != null)
{

    <form asp-action="Payment">
        <table>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Cart[0].Order_ID)

                </th>
                <!--
                <th>
                    @*@Html.DisplayNameFor(model => model.Cart[0].Aantal)*@

                </th>
                <th>
                    @*@Html.DisplayNameFor(model => model.Cart[0].Prijs)*@

                </th>
                -->
                <th>
                    Subtotaal
                </th>
            </tr>
            
            <tr>
                <td>
                    <input type="submit" value="Checkout"
                           class="btn btn-default" />
                </td>
            </tr>
            <tr>
                
            </tr>
        </table>
    </form>
}
else
{ @Html.Raw("Uw winkelwagentje is op dit moment leeg! ")
}


<a asp-controller="Wedstrijd"
   asp-action="Index">

    Koop hier uw tickets! 
</a>

@*@section Scripts {


    <script>

        $( () => {
            //selecteer alle input elementen die eindigen met aantal
            $("[id$=Aantal]").on('change',  (e) => {
                console.log("change");
                let number = $(e.currentTarget).data("aantal"); // hoeveelste element, bijhouden in een data-aantal atttribute
                let selectorPrice = "Cart_" + number + "__Prijs";
                let price = $("#" + selectorPrice).val();
                let selector = "txtSubTotal" + number;
                $('#' + selector).val($(e.currentTarget).val()
                                                      * price);
                let sum = 0;
                $('[id^=txtSubTotal]').each( (index, element) => {
                    if (!isNaN($(element).val())) {
                        sum += parseFloat($(element).val());
                    }
                });

                $('#txtTotal').val(sum);
            });

        });
    </script>
}*@

